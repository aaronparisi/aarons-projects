!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","prop-types"],e):t.ReactStagger=e(t.React,t.PropTypes)}(this,function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},s=new(function(){function t(){r(this,t),this.lastStagger=0,this.currentDelay=0,this.lastDelay=0}return t.prototype.getDelay=function(t,e){var r=Date.now();t=+t,r-this.lastStagger>100&&(this.lastStagger=r,this.currentDelay=0,this.lastDelay=0),(this.currentDelay>0||this.lastDelay>0)&&(this.lastDelay=Math.max(this.lastDelay,t));var n=this.currentDelay+this.lastDelay;return e&&(this.currentDelay+=this.lastDelay,this.lastDelay=t),n},t}()),i=function(t){function e(){var i,o;r(this,e);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return i=o=n(this,t.call.apply(t,[this].concat(u))),o.staggerContext={subscribe:o.subscribe.bind(o),value:!1,timing:o.props.timing||o.context.timing||s},o.selfValue=o.props.in,o.subscribers=[],o.unsubscribe=null,o.state={value:!1,delay:0},n(o,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentWillMount=function(){var t=this;this.context.stagger&&(this.unsubscribe=this.context.stagger.subscribe(function(){return t.checkUpdate()})),this.props.appear||this.checkUpdate(!0)},e.prototype.componentDidMount=function(){this.props.appear&&this.checkUpdate()},e.prototype.componentWillReceiveProps=function(t){this.selfValue=t.in,this.checkUpdate()},e.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.checkUpdate=function(t){var e=!this.context.stagger||this.context.stagger.value,r=this.selfValue&&e;if(r!==this.staggerContext.value){this.staggerContext.value=r;var n=this.calculateDelay(r,t);this.setState({value:r,delay:n})}},e.prototype.calculateDelay=function(t,e){if(e)return 0;var r=this.staggerContext.timing,n=!this.subscribers.length,s=this.getOwnDelay(),i=s[0],o=s[1],a=t?r.getDelay(i,n):0;return n||this.subscribers.forEach(function(t){t()}),t&&r.getDelay(o,!1),a},e.prototype.getOwnDelay=function(){var t=this.props.delay;return Array.isArray(t)?t:[t,t]},e.prototype.getChildContext=function(){return{stagger:this.staggerContext}},e.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){e.subscribers=e.subscribers.filter(function(e){return e!==t})}},e.prototype.render=function(){var t=this.props.children;return"function"==typeof t?t(this.state):t||null},e}(t.Component);return i.childContextTypes={stagger:e.object.isRequired},i.contextTypes={stagger:e.object},i.defaultProps={delay:100,in:!0,appear:!0},i});
//# sourceMappingURL=react-stagger.umd.min.js.map
